diff --git a/src/rh-config.c b/src/rh-config.c
index a12d8e0..cc43d8c 100755
--- a/src/rh-config.c
+++ b/src/rh-config.c
@@ -69,18 +69,12 @@ enum lcfg_status rahunas_visitor(const char *key, void *data, size_t size,
     case VSERVER:
       if (strncmp(sub_key, "vserver_id", 10) == 0) {
         config->rh_vserver.vserver_id = atoi(value);
+      } else if (strncmp(sub_key, "vserver_ip", 10) == 0) {
+        if (config->rh_vserver.vserver_ip != NULL)
+          free(config->rh_vserver.vserver_ip);
+        config->rh_vserver.vserver_ip = strdup(value); 
       } else if (strncmp(sub_key, "idle_timeout", 12) == 0) {
         config->rh_vserver.idle_timeout = atoi(value);
-      } else if (strncmp(sub_key, "xml_serv_port", 13) == 0) {
-        config->rh_vserver.xml_serv_port = atoi(value); 
-      } else if (strncmp(sub_key, "xml_serv_host", 13) == 0) {
-        if (config->rh_vserver.xml_serv_host != NULL)
-          free(config->rh_vserver.xml_serv_host);
-        config->rh_vserver.xml_serv_host = strdup(value); 
-      } else if (strncmp(sub_key, "xml_serv_url", 12) == 0) {
-        if (config->rh_vserver.xml_serv_url != NULL)
-          free(config->rh_vserver.xml_serv_url);
-        config->rh_vserver.xml_serv_url = strdup(value); 
       }
       break;
   }
@@ -170,9 +164,8 @@ int get_vservers_config(const char *conf_dir, struct main_server *server)
 
 int cleanup_vserver_config(struct rahunas_vserver_config *config)
 {
+  rh_free(&(config->vserver_ip));
   rh_free(&(config->vserver_name));  
-  rh_free(&(config->xml_serv_host));
-  rh_free(&(config->xml_serv_url));
   return 0;
 }
 
diff --git a/src/rh-config.h b/src/rh-config.h
index 99c7075..ee7ace0 100644
--- a/src/rh-config.h
+++ b/src/rh-config.h
@@ -17,7 +17,7 @@
 
 #define XMLSERVICE_HOST "localhost"
 #define XMLSERVICE_PORT 80
-#define XMLSERVICE_URL  "/xmlrpc_service.php"
+#define XMLSERVICE_URL  "/rahunas_service/xmlrpc_service.php"
 
 #define CONFIG_FILE RAHUNAS_CONF_DIR "rahunas.conf"
 #define DEFAULT_PID RAHUNAS_RUN_DIR "rahunasd.pid"
@@ -34,9 +34,7 @@ struct rahunas_vserver_config {
   int  vserver_id;
   char *vserver_name;
   int  idle_timeout;
-  int  xml_serv_port;
-  char *xml_serv_host;
-  char *xml_serv_url;
+  char *vserver_ip;
 };
 
 union rahunas_config {
diff --git a/src/rh-server.c b/src/rh-server.c
index 484fd02..0ad273c 100644
--- a/src/rh-server.c
+++ b/src/rh-server.c
@@ -86,11 +86,9 @@ int register_vserver(struct main_server *ms, const char *vserver_cfg_file)
 
   union rahunas_config config = {
     .rh_vserver.vserver_id = VSERVER_ID,
+    .rh_vserver.vserver_ip = NULL, 
     .rh_vserver.vserver_name = NULL,
     .rh_vserver.idle_timeout = IDLE_TIMEOUT,
-    .rh_vserver.xml_serv_port = XMLSERVICE_PORT,
-    .rh_vserver.xml_serv_host = strdup(XMLSERVICE_HOST),
-    .rh_vserver.xml_serv_url = strdup(XMLSERVICE_URL),
   };
 
   cfg_file = fopen(vserver_cfg_file, "r");
@@ -105,8 +103,7 @@ int register_vserver(struct main_server *ms, const char *vserver_cfg_file)
   memset(vserver_config, 0, sizeof(struct rahunas_vserver_config));
 
   if (get_config(vserver_cfg_file, &config) != 0) {
-    rh_free(&config.rh_vserver.xml_serv_host);
-    rh_free(&config.rh_vserver.xml_serv_url);
+    rh_free(&config.rh_vserver.vserver_ip);
     return -1;
   }
 
diff --git a/src/rh-xmlrpc-cmd.c b/src/rh-xmlrpc-cmd.c
index 51a307b..7bdf353 100644
--- a/src/rh-xmlrpc-cmd.c
+++ b/src/rh-xmlrpc-cmd.c
@@ -35,12 +35,13 @@ int send_xmlrpc_stopacct(struct vserver *vs, uint32_t id, int cause) {
                            mac_tostring(member->mac_address),
                            cause);
 
+  DP("Params = %s", params);
+
   if (params == NULL)
     return (-1);
 
-  client = gnet_xmlrpc_client_new(vs->vserver_config->xml_serv_host, 
-                                  vs->vserver_config->xml_serv_url, 
-                                  vs->vserver_config->xml_serv_port);
+  client = gnet_xmlrpc_client_new(XMLSERVICE_HOST, XMLSERVICE_URL, 
+                                  XMLSERVICE_PORT);
 
   if (!client) {
     logmsg(RH_LOG_ERROR, "[%s] Could not connect to XML-RPC service", vs->vserver_config->vserver_name);
@@ -54,6 +55,9 @@ int send_xmlrpc_stopacct(struct vserver *vs, uint32_t id, int cause) {
     }
   else
     {
+      if (reply != NULL)
+        DP("stopacct reply = %s", reply);
+
       DP("%s", "Failed executing stopacct!");
       return (-1);
     }
diff --git a/weblogin/xmlrpc_service.php b/weblogin/xmlrpc_service.php
index 88de84e..ae94b48 100644
--- a/weblogin/xmlrpc_service.php
+++ b/weblogin/xmlrpc_service.php
@@ -33,6 +33,7 @@
 
 require_once 'config.php';
 require_once 'rahu_radius.class.php';
+require_once 'networkchk.php';
 
 // Deny all connections that does not come from the localhost
 if ($_SERVER['REMOTE_ADDR'] != "127.0.0.1")
@@ -89,6 +90,9 @@ if ($GLOBALS["task"] == "do_stopacct") {
   $mac_address =& $GLOBALS["mac_address"];
   $cause =& $GLOBALS["cause"];
 
+  $config = get_config_by_network($ip, $config_list);
+  $vserver_id = $config["VSERVER_ID"];
+
   $racct = new rahu_radius_acct ($username);
   $racct->host = $config["RADIUS_HOST"];
   $racct->port = $config["RADIUS_ACCT_PORT"];
